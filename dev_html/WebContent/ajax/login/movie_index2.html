<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>부분갱신처리[ajax활용 ver-2]</title>
<!-- jquery api or easyui api or cookie or css  -->
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/themes/color.css">
	<link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/demo/demo.css">
	<script type="text/javascript" src="https://www.jeasyui.com/easyui/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

	<style type="text/css">
		#d_login{
			border:1px solid #cccccc;
			background: orange;
			width: 231px;
			height:120px;
		}
		#d_logout{
			border:1px solid #cccccc;
			background: green;
			width: 231px;
			height:80px;
		}
	</style>
	<script type="text/javascript">
		var c_name;
		function loginAction(){
			var db_id = "test";
			var db_pw = "123";
			var db_name = "이순신";
			var u_id =$("#mem_id").val();
			//사용자가 입력한 id ,pw
			var u_pw =$("#mem_pw").val();
			var param ="mem_id"+u_id+"&mem_pw"+mem_pw;
			if(db_id==u_id){
				if(db_pw==u_pw){
					$.cookie("c_name",db_name);
					//로그인이 성공했으므로 d_login은 숨기고 d_logout을 보여줌.
					$("#d_login").hide();
					$("#d_logout").show();
				}else{
					alert("비번이 틀렸습니다.");
					$("#mem_pw").passwordbox('setValue','');
				}
			}else{
				alert("아이디가 없습니다");
				
			}
		};
	</script>
</head>
<body>
<script type="text/javascript">
	$(document).ready(function(){
		var c_name =null;
		//쿠키에서 꺼낸 이름이 null이면 로그인을 하지 않음.
		//null이 아니면 로그인 한 경우
		c_name = $.cookie('c_name');
		alert("c_name: "+c_name);
		if(c_name==null){
			$("#d_login").show();
			$("#d_logout").hide();
		}else{
			$("#d_login").hide();
			$("#d_logout").show();
		}
	});
</script> 
<div id="lay_movie" class="easyui-layout" style="width:900px;height:500px;">
	<div data-options="region:'west',title:'코딩놀이',split:false" style="width:235px;">
	<div style="margin:10px;"></div>
	<div id="d_login" align="center">
	<div style="margin:3px;"></div>
	<input id="mem_id" class="easyui-textbox" prompt="ID" style="width:230px;height:34px;">
	<br>
	<div style="margin:3px;"></div>
	<input id="mem_pw" class="easyui-passwordbox" prompt="Password" style="width:230px;height:34px;">
	<div style="margin:3px;"></div>
	<a id="btn_login" href="javascript:loginAction()" class="easyui-linkbutton">로그인</a>
	<a id="btn_member" href="javascript:memberAction" class="easyui-linkbutton">회원가입</a>
	</div>
		<div id="d_logout">
	</div>
	<br>
	<div align="center">
		<a id="btn_" href="#" class="easyui-linkbutton" width="125px" height="34px">회원관리</a>
	</div>
	</div>
    <div data-options="region:'center',title:'영화예메 시스템'" style="padding:5px;background:#eee;"></div>
</div>
<script type="text/javascript">
		$("#mem_id").textbox({
			iconCls:'icon-man'
			,iconAlign:'right'
		});
		$("#mem_pw").textbox({
			iconCls:'icon-lock'
			,iconAlign:'right'
		});
		$('#btn_login').linkbutton({
			iconCls:'icon-ok'
			,width:111
		});
		$('#btn_member').linkbutton({
			iconCls:'icon-edit'
			,width:111
		});
		$('#btn_').linkbutton({
			width:125
		});
</script>
</body>
</html>